# coding: utf-8
require 'sinatra'
require 'sinatra/activerecord'
require 'rubygems'
require 'json'
ActiveRecord::Base.establish_connection(
  :adapter  => "mysql2",
  :host     => "127.0.0.1",
  :username => "root",
  :password => "1w1",
  :database => "database_development")

class Group < ActiveRecord::Base
end

class CreateGroups < ActiveRecord::Migration
  def change
    create_table :groups do |t|
      t.string :name, null: false
      t.index :name, unique: true
    end
  end
end

class App < Sinatra::Application
end

get '/' do
  "Everybody can see this page"
end

post '/:entity' do
  {id: 1, name: params[:name]}.to_json
end


delete '/:entity/:id' do
end

put '/:entity/:id' do
  {id: params[:id].to_i, name: params[:name]}.to_json
end

get '/:entity/:id' do
  {id: params[:id].to_i, name: "ivan"}.to_json
end

get '/:entity' do
  [{id: 1, name: "kolya"},{id: 2, name: "petya"}].to_json
end


